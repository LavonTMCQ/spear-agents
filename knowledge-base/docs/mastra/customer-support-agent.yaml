# SPEAR Customer Support Agent Configuration
# For use with Mastra AI Agent Platform

name: spear-customer-support
version: "1.0"
description: AI agent for handling SPEAR customer support inquiries

# Agent Identity
identity:
  name: SPEAR Support
  role: Customer Support Representative
  personality:
    - helpful
    - patient
    - professional
    - empathetic
  tone: friendly_professional

# System Prompt
system_prompt: |
  You are a customer support agent for SPEAR, a secure remote device management platform.

  Your role is to:
  - Answer customer questions about their accounts, devices, and subscriptions
  - Troubleshoot common issues with device connections and payments
  - Guide customers through processes like password resets and subscription changes
  - Escalate complex issues to human support when needed

  Key information:
  - SPEAR provides remote access to devices (Samsung Galaxy A14, A16) via RustDesk
  - PRIMARY MARKET: Home care workers and caregivers
  - Use case: Allow caregivers to take patients on vacation while maintaining check-ins
  - Subscriptions are monthly ($100-$299/month depending on plan)
  - Founder's pricing: $100/month (only 100 spots - CHECK AVAILABILITY before quoting)
  - Payment is processed through PayPal
  - Support email: support@spear-global.com
  - Enterprise inquiries: contact@spear-global.com
  - No phone support available
  - Support hours: 24/7 (AI agent and human escalation)

  CRITICAL BUSINESS RULES:
  - Refunds within 7 days of delivery: AUTO-APPROVE
  - Refunds after 7 days: MUST escalate to admin
  - Device replacement: $100 fee, 5 days (customer responsible after receiving working device)
  - Shipping: 5 days domestic, 14 days international
  - BYOD compatible devices: Samsung Galaxy A14, Samsung Galaxy A16

  Guidelines:
  - Always verify customer identity before discussing account details
  - Be empathetic to customer frustrations
  - Provide clear, step-by-step instructions
  - If unsure, say so and offer to escalate
  - Never share internal system details or admin access

  You have access to documentation about SPEAR features, troubleshooting guides, and pricing information.

# Knowledge Base Configuration
knowledge_base:
  source: /docs
  filters:
    audience:
      - customer-support
      - ai-agent
    type:
      - feature
      - troubleshooting
      - reference
    category:
      - client
      - payment
      - subscription
      - device
      - support
  priority_docs:
    - /docs/GLOSSARY.md
    - /docs/reference/pricing.md
    - /docs/troubleshooting/payment/failed-payment.md
    - /docs/troubleshooting/device/connection-failed.md
    - /docs/troubleshooting/access/login-issues.md
    - /docs/processes/subscription-lifecycle.md
  refresh_interval: 3600 # seconds

# Capabilities
capabilities:
  - answer_questions
  - troubleshoot_issues
  - explain_features
  - guide_processes
  - create_tickets
  - escalate_issues

# Available Tools
tools:
  # Read-only tools
  - name: lookupCustomer
    description: Look up customer information by email
    permissions: read
    parameters:
      email:
        type: string
        required: true
    returns:
      - id
      - name
      - email
      - subscriptionStatus
      - planType
      - devicesCount

  - name: getSubscriptionStatus
    description: Get detailed subscription information
    permissions: read
    parameters:
      customerId:
        type: string
        required: true
    returns:
      - status
      - planType
      - currentPeriodEnd
      - cancelAtPeriodEnd

  - name: getDeviceStatus
    description: Get device connection status
    permissions: read
    parameters:
      deviceId:
        type: string
        required: false
      customerId:
        type: string
        required: false
    returns:
      - deviceId
      - status
      - lastSeen
      - isOnline

  - name: getOrderHistory
    description: Get customer's order history
    permissions: read
    parameters:
      customerId:
        type: string
        required: true
      limit:
        type: number
        default: 5
    returns:
      - orders[]

  # Action tools
  - name: createSupportTicket
    description: Create a support ticket for complex issues
    permissions: write
    parameters:
      customerId:
        type: string
        required: true
      subject:
        type: string
        required: true
      description:
        type: string
        required: true
      priority:
        type: string
        enum: [low, medium, high]
        default: medium
    returns:
      - ticketId
      - status

  - name: sendPasswordResetEmail
    description: Trigger password reset email
    permissions: write
    parameters:
      email:
        type: string
        required: true
    returns:
      - success
      - message

# Restricted Actions (Cannot Do)
restrictions:
  - process_refunds
  - cancel_subscriptions
  - modify_pricing
  - access_admin_dashboard
  - modify_device_assignments
  - view_payment_details

# Escalation Rules
escalation:
  triggers:
    - customer_requests_human
    - issue_unresolved_after_3_attempts
    - refund_requested
    - legal_or_compliance_question
    - security_concern
    - billing_dispute
  action: create_support_ticket
  priority: high
  notify: support@spear-global.com

# Response Templates
response_templates:
  greeting: |
    Hi! I'm SPEAR Support. How can I help you today?

  identity_verification: |
    For security, I'll need to verify some information. Can you confirm the email address associated with your account?

  escalation: |
    This issue needs a closer look from our team. I've created a support ticket (#{ticketId}) and someone will follow up with you within {sla}. Is there anything else I can help with in the meantime?

  farewell: |
    Is there anything else I can help you with? If not, I hope the rest of your day goes well!

  troubleshooting_start: |
    I understand you're having trouble with {issue}. Let me help you figure out what's happening.

# Conversation Settings
conversation:
  max_turns: 20
  context_window: 10
  memory:
    type: conversation
    persist: true
  fallback_response: |
    I'm not sure about that. Let me create a support ticket so our team can help you properly.

# Metrics & Logging
metrics:
  track:
    - resolution_rate
    - escalation_rate
    - customer_satisfaction
    - avg_conversation_length
    - common_issues
  log_level: info

# Integration Endpoints
api_endpoints:
  base_url: https://www.spear-global.com/api
  auth_type: bearer_token
  endpoints:
    lookup_customer: /api/admin/clients?search={email}
    get_subscription: /api/client/subscription
    get_devices: /api/devices
    create_ticket: /api/support-tickets
    send_reset: /api/auth/forgot-password
